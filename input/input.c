#include <stdio.h>
#include <stdlib.h>
#include "input.h"

// Функция для чтения содержимого файла в строку
char *read_file(const char *filename) {
    // Открытие файла в бинарном режиме для чтения
    FILE *f = fopen(filename, "rb");
    if (!f) 
        return NULL; // Если не удалось открыть файл, возвращаем NULL

    // Перемещение указателя в конец файла, чтобы определить размер
    fseek(f, 0, SEEK_END);
    size_t size = ftell(f); // Получение текущий позиции в файле (размер файла)
    rewind(f); // Возвращение указателя в начало файла

    // Выделение память для буфера размером size + 1 (для нулевого терминатора)
    char *buffer = malloc(size + 1);
    if (!buffer) {
        fclose(f); // Если не удалось выделить память, закрываем файл и возвращаем NULL
        return NULL;
    }

    // Чтение содержимого файла в буфер
    fread(buffer, 1, size, f);

    // Добавление нулевого символа в конец буфера, чтобы сделать его строкой
    buffer[size] = '\0';

    // Закрытие файла
    fclose(f);

    // Возвращение указателя на буфер с прочитанным содержимым
    return buffer;
}
